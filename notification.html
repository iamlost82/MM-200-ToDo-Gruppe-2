<!DOCTYPE html>
<html>
<head>
<title>Desktop Notifications</title>
</head>
<body>
    <a href="#" id="dnperm">Request permission</a>
    <a href="#" id="dntrigger">Trigger</a>
    
</body>
<script>
    let dnperm = document.getElementById('dnperm');
    let dntrigger = document.getElementById('dntrigger');
    
    dnperm.addEventListener('click', function(e){
        e.preventDefault();
        
        if(!window.Notification){
            alert('sorry, notification are not supported')
        }
        else{
            Notification.requestPermission(function(p){
                if(p === 'denied'){
                    alert('You have denied notifications.');
                }else if(p === 'granted'){
                    alert('You have granted notifications.');
                }
            });
        }
    });
    
    //Simulate an event
    dntrigger.addEventListener('click', function(e){
        let notify;
        e.preventDefault();
        
        if(Notification.permission === 'default'){
            alert('please allow notifications before doing this.');
        }else{
            notify = new Notification('New message from Siri', {
                body: 'How are you today? It really is a lovely day.',
                //icon: 'img/messege.png'   
                tag: '1234'
            });
            notify.onclick = function(){
                //console.log(this.tag);
                window.location = '?message=' + this.tag;    
            }
            
        }
        
    });
    
    


/*var img = '/to-do-notifications/img/icon-128.png';
var text = 'HEY! Your task "' + title + '" is now overdue.';
var notification = new Notification('To do list', { body: text, icon: img });  */
 
    //https://www.youtube.com/watch?v=IdK0nZdrkOk
   
</script>  
   


</html>